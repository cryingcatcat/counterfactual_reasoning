<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Contrast Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
    <div class="dashboard">
        <header>
            <div class="logo">Causal Contrast</div>
            <div class="unit-toggle">
                <span class="active">[ STRUCTURAL ]</span>
                <span>[ PROBABILISTIC ]</span>
            </div>
        </header>

        <div class="main-grid" id="report-content">
            <!-- Left Column: Factual -->
            <div class="column">
                <div class="data-section">
                    <div class="label">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                        Source Context
                    </div>
                    <div class="value-small">Factual Story (T)</div>
                    <div id="factual-story" class="value-medium" style="margin-top: 15px; font-style: italic;"></div>
                </div>

                <div class="data-section">
                    <div class="label">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/></svg>
                        Intervention Variable
                    </div>
                    <div id="intervention-variable" class="value-large"></div>
                    <div class="value-small">TARGET VARIABLE (V)</div>
                </div>

                <div class="data-section">
                    <div class="label">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 7h16M4 11h16M4 15h16M4 19h16"/></svg>
                        Formalism
                    </div>
                    <div id="math-query" class="value-medium" style="color: var(--accent-orange);"></div>
                    <div class="value-small">PROBABILISTIC QUERY (M)</div>
                </div>
            </div>

            <!-- Center Column: Structure -->
            <div class="column center-column">
                <div class="label" style="justify-content: center; margin-bottom: 20px;">
                    Causal Structure (G)
                </div>
                <div class="central-viz">
                    <div id="mermaid-container" style="width: 100%;"></div>
                </div>
                <div style="margin-top: auto; padding-top: 20px; text-align: center;">
                    <div class="value-small">Graph Specification</div>
                    <code id="raw-graph-text" style="font-size: 0.6rem; opacity: 0.5; word-break: break-all;"></code>
                </div>
            </div>

            <!-- Right Column: Counterfactual -->
            <div class="column">
                <div class="data-section" style="text-align: right;">
                    <div class="label" style="justify-content: flex-end;">
                        Counterfactual Query
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
                    </div>
                    <div id="cf-question" class="value-medium" style="font-weight: 700;"></div>
                    <div class="value-small">PROPOSED CHANGE (Q)</div>
                </div>

                <div class="data-section" style="text-align: right;">
                    <div class="label" style="justify-content: flex-end;">
                        Model Output
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                    </div>
                    <div id="response-s" class="value-medium" style="color: var(--accent-blue); margin-bottom: 20px;"></div>
                    <div id="response-s-prime" class="value-medium" style="color: var(--accent-orange); border-top: 1px solid var(--border-color); pt-10"></div>
                    <div class="value-small">SIMULATED RESULTS (S / S')</div>
                </div>
            </div>

            <!-- Bottom: Selector & Errors -->
            <div class="selector-panel">
                <select id="example-selector">
                    <option value="sports_donk_vitality">RUSSIA VS CANADA STYLE: DONK V VITALITY</option>
                    <option value="daily_delayed_train">DELAYED TRAIN ANALYSIS</option>
                    <option value="daily_lucy_umbrealla">LUCY'S UMBRELLA PARADOX</option>
                    <option value="health_lucy_gain_weights">WEIGHT GAIN MECHANISM</option>
                    <option value="physics_photoelectric_effect">PHOTOELECTRIC EFFECT DATA</option>
                </select>
            </div>

            <div class="error-footer">
                <div class="label" style="justify-content: center;">Diagnostic Evaluation</div>
                <div id="error-description" class="value-medium" style="font-weight: 700; color: #d00;"></div>
            </div>
        </div>

        <footer style="margin-top: 60px; text-align: center; font-size: 0.6rem; color: var(--text-muted); letter-spacing: 0.1em; text-transform: uppercase;">
            &copy; 2025 Causal Inference Research Archive â€¢ Data Visualization Module
        </footer>
    </div>

    <script type="module" src="src/js/app.js"></script>
</body>
</html>
