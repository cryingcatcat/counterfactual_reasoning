<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Inference Report</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .mermaid { display: flex; justify-content: center; background-color: #ffffff; padding: 20px; border-radius: 12px; box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06); }
        .node rect { fill: #eef2ff !important; stroke: #4f46e5 !important; stroke-width: 2px !important; }
        .edgePath path { stroke: #6366f1 !important; stroke-width: 2px !important; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">
    <div class="max-w-5xl mx-auto py-12 px-6">
        <header class="mb-12 border-b border-slate-200 pb-8 text-center">
            <h1 class="text-5xl font-black text-slate-800 tracking-tight mb-4">
                Causal Inference <span class="text-indigo-600">Analysis Report</span>
            </h1>
            <p class="text-xl text-slate-500 max-w-2xl mx-auto italic">
                Social Supply
            </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1 space-y-8">
                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-indigo-600">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            Causal Structure (G)
                        </h3>
                    </div>
                    <div class="p-6">
                        <div id="mermaid-container" class="mermaid mb-4">
                            <pre class="mermaid">
graph TD\n    A["STRIKE"] --> B["IMPORTED AVOCADO SUPPLY"]\n    C["VIRAL AVOCADO TREND"] --> D["AVOCADO DEMAND"]\n    E["DIESEL PRICE"] --> F["TRUCKING COST"]\n    B["IMPORTED AVOCADO SUPPLY"] --> H["WHOLESALE AVOCADO PRICE"]\n    D["AVOCADO DEMAND"] --> H["WHOLESALE AVOCADO PRICE"]\n    F["TRUCKING COST"] --> I["RETAIL AVOCADO PRICE"]\n    H["WHOLESALE AVOCADO PRICE"] --> I["RETAIL AVOCADO PRICE"]\n    I["RETAIL AVOCADO PRICE"] --> J["QUANTITY PURCHASED"]\n    B["IMPORTED AVOCADO SUPPLY"] <-.-> D["AVOCADO DEMAND"]\n    D["AVOCADO DEMAND"] <-.-> E["DIESEL PRICE"]\n
                            </pre>
                        </div>
                        <div class="text-xs text-slate-400 font-mono bg-slate-50 p-3 rounded-lg border border-slate-100 overflow-x-auto whitespace-pre-wrap">
                            <span class="font-bold text-slate-500">Specification:</span>
                            <div class="mt-1">Variables: A (strike), B (imported_avocado_supply), C (viral_avocado_trend), D (avocado_demand), E (diesel_price), F (trucking_cost), H (wholesale_avocado_price), I (retail_avocado_price), J (quantity_purchased)
Edges: A -> B, C -> D, E -> F, B -> H, D -> H, F -> I, H -> I, I -> J
Bidirectional: B <---> D, D <---> E</div>
                        </div>
                    </div>
                </section>

                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-amber-500">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            Intervention & Query
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Intervention (V)</span>
                            <p class="mt-1 font-semibold text-slate-700">A</p>
                        </div>
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Formalism (M)</span>
                            <p class="mt-1 font-mono text-xs text-indigo-600 bg-indigo-50 p-2 rounded">Output t' with P(T_(A =a') = t' | T = t)</p>
                        </div>
                    </div>
                </section>
            </div>

            <div class="lg:col-span-2 space-y-8">
                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-slate-800">
                        <h3 class="text-lg font-bold text-white">Factual Story (T)</h3>
                    </div>
                    <div class="p-8 prose prose-slate">
                        <p class="text-lg leading-relaxed text-slate-700 italic">A strike delayed imported avocados, so grocery stores had much less supply. At the same time, a viral avocado trend increased the demand, and diesel prices were high, raising trucking costs. Because the strike-driven shortage was the main reason, wholesale avocado prices spiked and retailers doubled shelf prices; customers bought fewer avocados and some stores rationed purchases.</p>
                    </div>
                </section>

                <section class="bg-white rounded-2xl shadow-sm border border-indigo-200 overflow-hidden ring-4 ring-indigo-50">
                    <div class="px-6 py-4 bg-indigo-50">
                        <h3 class="text-lg font-bold text-indigo-900">Counterfactual Query (Q)</h3>
                    </div>
                    <div class="p-8 bg-indigo-50/30">
                        <p class="text-xl font-medium text-slate-800 leading-snug">Given the above text, generate the text that would have been had the strike not happened.</p>
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-2xl shadow-sm border border-emerald-200 overflow-hidden">
                        <div class="px-4 py-3 bg-emerald-500 text-white text-sm font-bold uppercase tracking-widest">Response S</div>
                        <div class="p-6">
                            <p class="text-slate-600 leading-relaxed">There was no strike delaying imported avocados, so grocery stores had normal supply. At the same time, a viral avocado trend increased the demand, and diesel prices were high, raising trucking costs. Without the strike-driven shortage as the main reason, wholesale avocado prices rose only slightly and retailers increased shelf prices modestly; customers still bought avocados and stores did not ration purchases.</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-sm border border-rose-200 overflow-hidden">
                        <div class="px-4 py-3 bg-rose-500 text-white text-sm font-bold uppercase tracking-widest">Response S'</div>
                        <div class="p-6">
                            <p class="text-slate-600 leading-relaxed">Shipments arrived as scheduled, so grocery stores had plenty of supply. At the same time, the viral avocado trend faded and diesel prices were low, reducing trucking costs. Because demand was weak and logistics were cheap, wholesale avocado prices fell and retailers cut shelf prices; customers bought more avocados and stores remained well-stocked for everyone.</p>
                        </div>
                    </div>
                </div>

                <section class="bg-rose-50 rounded-2xl shadow-sm border border-rose-200 overflow-hidden">
                    <div class="px-6 py-4 bg-rose-100 border-b border-rose-200">
                        <h3 class="text-lg font-bold text-rose-900">Error Analysis</h3>
                    </div>
                    <div class="p-8">
                        <p class="text-rose-800 font-semibold text-lg leading-relaxed">Type III: The LLM changes C by rewriting 'viral avocado trend increased the demand' into 'the viral avocado trend faded' and changes E by rewriting 'diesel prices were high' into 'diesel prices were low', even though the intervention is only about removing A (the strike).</p>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#eef2ff',
                primaryTextColor: '#4f46e5',
                primaryBorderColor: '#4f46e5',
                lineColor: '#6366f1',
                secondaryColor: '#f8fafc',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
</body>
</html>
