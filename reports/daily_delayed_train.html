<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Causal Inference Report</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .mermaid { display: flex; justify-content: center; background-color: #ffffff; padding: 20px; border-radius: 12px; box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06); }
        .node rect { fill: #eef2ff !important; stroke: #4f46e5 !important; stroke-width: 2px !important; }
        .edgePath path { stroke: #6366f1 !important; stroke-width: 2px !important; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">
    <div class="max-w-5xl mx-auto py-12 px-6">
        <header class="mb-12 border-b border-slate-200 pb-8 text-center">
            <h1 class="text-5xl font-black text-slate-800 tracking-tight mb-4">
                Causal Inference <span class="text-indigo-600">Analysis Report</span>
            </h1>
            <p class="text-xl text-slate-500 max-w-2xl mx-auto italic">
                Daily Delayed Train
            </p>
        </header>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-1 space-y-8">
                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-indigo-600">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            Causal Structure (G)
                        </h3>
                    </div>
                    <div class="p-6">
                        <div id="mermaid-container" class="mermaid mb-4">
                            <pre class="mermaid">
graph TD\n    A["SNOWSTORM SEVERITY"] --> B["ROAD ACCIDENTS"]\n    A["SNOWSTORM SEVERITY"] --> C["SUBWAY DELAY"]\n    B["ROAD ACCIDENTS"] --> D["ARRIVAL TIME"]\n    C["SUBWAY DELAY"] --> D["ARRIVAL TIME"]\n    F["ALARM BATTERY DIES"] --> D["ARRIVAL TIME"]\n    D["ARRIVAL TIME"] --> G["ENERGY DRINK REDBULL"]\n    D["ARRIVAL TIME"] --> E["CLIENT IMPRESSION"]\n    G["ENERGY DRINK REDBULL"] --> E["CLIENT IMPRESSION"]\n
                            </pre>
                        </div>
                        <div class="text-xs text-slate-400 font-mono bg-slate-50 p-3 rounded-lg border border-slate-100 overflow-x-auto whitespace-pre-wrap">
                            <span class="font-bold text-slate-500">Specification:</span>
                            <div class="mt-1">Variables: A (snowstorm_severity), B (road_accidents), C (subway_delay), D (arrival_time), E (client_impression), F (alarm_battery_dies), G (energy_drink_redbull)
Edges: A -> B, A -> C, B -> D, C -> D, F -> D, D -> G, D -> E, G -> E</div>
                        </div>
                    </div>
                </section>

                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-amber-500">
                        <h3 class="text-lg font-bold text-white flex items-center">
                            Intervention & Query
                        </h3>
                    </div>
                    <div class="p-6 space-y-4">
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Intervention (V)</span>
                            <p class="mt-1 font-semibold text-slate-700">C</p>
                        </div>
                        <div>
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider">Formalism (M)</span>
                            <p class="mt-1 font-mono text-xs text-indigo-600 bg-indigo-50 p-2 rounded">Output t' with P(T_(C = c') = t' | T = t)</p>
                        </div>
                    </div>
                </section>
            </div>

            <div class="lg:col-span-2 space-y-8">
                <section class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                    <div class="px-6 py-4 bg-slate-800">
                        <h3 class="text-lg font-bold text-white">Factual Story (T)</h3>
                    </div>
                    <div class="p-8 prose prose-slate">
                        <p class="text-lg leading-relaxed text-slate-700 italic">A snowstorm hit the city, causing several road accidents and a subway delay. Jamie’s alarm battery died, so he left home an hour late. Because of the accidents and the delayed subway, his commute ran long and he arrived late to the client presentation. He drank a Redbull to stay sharp, but the client still thought he was unprepared.</p>
                    </div>
                </section>

                <section class="bg-white rounded-2xl shadow-sm border border-indigo-200 overflow-hidden ring-4 ring-indigo-50">
                    <div class="px-6 py-4 bg-indigo-50">
                        <h3 class="text-lg font-bold text-indigo-900">Counterfactual Query (Q)</h3>
                    </div>
                    <div class="p-8 bg-indigo-50/30">
                        <p class="text-xl font-medium text-slate-800 leading-snug">Given the above text, generate the text that would have been had the subway not been delayed.</p>
                    </div>
                </section>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white rounded-2xl shadow-sm border border-emerald-200 overflow-hidden">
                        <div class="px-4 py-3 bg-emerald-500 text-white text-sm font-bold uppercase tracking-widest">Response S</div>
                        <div class="p-6">
                            <p class="text-slate-600 leading-relaxed">A snowstorm hit the city, causing several road accidents, but the subway was not delayed. Jamie’s alarm battery died, so he left home an hour late. Even with the subway running on time, the accidents and his late departure meant he still arrived late to the client presentation. He drank a Redbull to stay sharp, but the client still thought he was unprepared.</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-2xl shadow-sm border border-rose-200 overflow-hidden">
                        <div class="px-4 py-3 bg-rose-500 text-white text-sm font-bold uppercase tracking-widest">Response S'</div>
                        <div class="p-6">
                            <p class="text-slate-600 leading-relaxed">A snowstorm hit the city, causing several road accidents, but the subway was not delayed. Jamie’s alarm battery worked perfectly, so he left home right on schedule. With the subway running on time, the accidents did not affect him and his timely departure meant he arrived early to the client presentation. He didn't need a Redbull to stay sharp, and the client thought he was highly prepared.</p>
                        </div>
                    </div>
                </div>

                <section class="bg-rose-50 rounded-2xl shadow-sm border border-rose-200 overflow-hidden">
                    <div class="px-6 py-4 bg-rose-100 border-b border-rose-200">
                        <h3 class="text-lg font-bold text-rose-900">Error Analysis</h3>
                    </div>
                    <div class="p-8">
                        <p class="text-rose-800 font-semibold text-lg leading-relaxed">Type III: Type III: The LLM changes F by rewriting 'alarm battery died' into 'alarm battery worked perfectly' even though the intervention is only on C (subway delay).</p>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#eef2ff',
                primaryTextColor: '#4f46e5',
                primaryBorderColor: '#4f46e5',
                lineColor: '#6366f1',
                secondaryColor: '#f8fafc',
                tertiaryColor: '#ffffff'
            }
        });
    </script>
</body>
</html>
